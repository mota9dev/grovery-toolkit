---
import SkipToContent from './SkipToContent.astro';
import SidebarToggle from './SidebarToggle';
import LanguageSelect from './LanguageSelect';
import Search from './Search.astro';
import ThemeToggleButton from './ThemeToggleButton';
import { getLanguageFromURL } from '../../util';
import { getDocSearchStrings, useTranslations } from '../../i18n/util';

const { currentPage } = Astro.props;
const lang = currentPage && getLanguageFromURL(currentPage);
const docsearchStrings = getDocSearchStrings(Astro);
const t = useTranslations(Astro);
---

<header>
	<SkipToContent />
	<nav class="nav-wrapper" aria-label={t('navbar.a11yTitle')}>
		<div dir="ltr" lang="en" class="logo flex">
			<ul>
				<li>
					<a class="astro" href="https://astro.build/">
						<span class="sr-only">The Grovery</span>
						<svg style="height: 48px" id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 637.88 178"><defs><style>.cls-1{fill:#00dfc3;}.cls-2{fill:#007b98;}.cls-3{fill:gray;}</style></defs><g id="Layer_1-2"><path class="cls-2" d="m63.38,30.1c0,1.3-.5,2.6-1.5,3.5l-29.3,29.3-.1.1c-10.9,11-10.9,28.9.1,39.8l28.9,28.9c.9.9,2.3.9,3.1,0l28.9-28.9c10.6-10.6,11-27.7,1.1-38.8l-27.5,27.3c-1.5,1.4-4,.4-4-1.7v-25.1c0-1.7.7-3.3,1.9-4.6l27.4-27.4c.9-.9,2.3-.9,3.2,0l16.8,16.8c9.7,9.7,14.6,22.7,13.8,36.5-.7,11.9-6.2,23-14.6,31.4l-46.9,46.9c-.4.4-1,.7-1.6.7s-1.1-.2-1.6-.7L13.88,116.5c-18.5-18.6-18.5-48.7,0-67.2L60.57,2.4c1-1,2.8-.3,2.8,1.1v26.6Z"/><path class="cls-1" d="m63.07,164.7c.6,0,1.1-.2,1.6-.7l46.9-46.9c8.4-8.4,13.9-19.5,14.6-31.4.8-13.8-4.2-26.9-13.8-36.5l-16.8-16.8c-.9-.9-2.3-.9-3.2,0l-27.4,27.5c-1.2,1.2-1.9,2.8-1.9,4.6v26.9c0,1.4,1.7,2.1,2.7,1.1l28.8-28.4c9.9,11.1,9.5,28.1-1.1,38.8l-28.9,28.9c-.4.4-1,.6-1.6.7l.1,32.2Z"/><g><path class="cls-3" d="m240.68,85.2h-40.8c-.2,0-.4.2-.3.4l2.1,10.3c1.1,2.8,3.9,4.7,7,4.7h14.8c.2,0,.3.2.3.3v14.5c0,.1,0,.2-.1.3-4.8,4.2-11.6,6.2-20.3,6.2-5.8,0-11.1-1.4-15.9-4.2-4.9-2.8-8.7-6.7-11.7-11.8-2.9-5.1-4.4-11.1-4.4-17.9,0-6.1,1.2-11.8,3.7-17.1,2.5-5.2,6-9.4,10.5-12.6,4.6-3.2,10-4.8,16.2-4.8s11.3,1.3,15.4,4c4,2.6,7.5,6.1,10.5,10.4.1.2.3.2.5.1l12.3-10.9c.1-.1.2-.3.1-.5-3.8-5.3-8.8-9.8-15-13.4-6.3-3.7-14.2-5.6-23.7-5.6-7.3,0-14,1.3-20,4-6.1,2.6-11.3,6.3-15.6,11-4.4,4.7-7.8,10.1-10.2,16.2-2.4,6.2-3.6,12.7-3.6,19.8,0,9.3,2,17.8,6.1,25.3,4,7.5,9.8,13.5,17.3,17.9s16.5,6.6,27,6.6c9.7,0,17.6-1.3,23.7-4,6-2.7,10.9-5.8,14.7-9.3.1-.1.1-.2.1-.3v-39.3c-.4-.2-.5-.3-.7-.3Z"/><path class="cls-3" d="m291.27,67.4c-1.3-.2-2.8-.3-4.4-.3-3.7,0-6.8.6-9.4,1.7s-4.9,2.4-6.6,3.9c-1.8,1.5-3.2,2.9-4.3,4.3-.2-4.8-4.2-8.5-9-8.5h-7.8v67.6h17v-36.5c0-5,1.7-9,5-12,3.4-3,7.4-4.5,12.1-4.5,2.9,0,5.5.4,7.8,1.3l3.5-16c-1.3-.4-2.6-.8-3.9-1Z"/><path class="cls-3" d="m349.77,71c-5.4-3.3-11.7-4.9-19-4.9s-13.5,1.6-19,4.9c-5.4,3.3-9.7,7.6-12.8,13.1-3.1,5.5-4.6,11.5-4.6,18s1.5,12.5,4.6,18,7.3,9.9,12.8,13.2c5.4,3.3,11.7,5,19,5s13.5-1.7,19-5c5.4-3.3,9.7-7.7,12.8-13.2,3.1-5.5,4.6-11.5,4.6-18s-1.5-12.5-4.6-18c-3.1-5.4-7.4-9.8-12.8-13.1Zm-1.9,41.1c-1.4,3.3-3.5,6.1-6.3,8.3-2.8,2.2-6.4,3.3-10.7,3.3s-7.9-1.1-10.7-3.3c-2.8-2.2-5-5-6.3-8.3-1.4-3.3-2.1-6.6-2.1-9.9s.7-6.5,2.1-9.8,3.5-6,6.3-8.2,6.4-3.3,10.7-3.3,7.9,1.1,10.7,3.3c2.8,2.2,4.9,5,6.3,8.2,1.4,3.3,2.1,6.5,2.1,9.8s-.7,6.5-2.1,9.9Z"/><path class="cls-3" d="m402.17,116.9l-14.3-38c-2.3-6.3-8.3-10.4-15-10.4h-8.5l28.7,67.6h17.3l28.5-67.6h-18.6l-18.1,48.4Z"/><path class="cls-3" d="m499.38,78.3c-2.6-3.7-6-6.7-10.2-8.9-4.2-2.2-9.5-3.3-15.7-3.3-6.7,0-12.7,1.6-17.8,4.7-5.1,3.1-9.2,7.4-12.1,12.7-2.9,5.3-4.4,11.3-4.4,17.9,0,7.2,1.5,13.6,4.5,19.2,3,5.6,7.1,9.9,12.5,13,5.3,3.1,11.6,4.7,18.8,4.7,5.3,0,9.8-.6,13.6-1.7,3.8-1.1,6.9-2.4,9.4-3.9s4.3-2.9,5.6-4.2,2.1-2.1,2.4-2.4l-9.2-10.4c-.8.8-2,1.8-3.7,3-1.7,1.3-4,2.4-6.9,3.4s-6.5,1.5-11,1.5c-3,0-5.9-.7-8.8-2.1s-5.3-3.3-7.1-5.8c-1.9-2.5-2.8-5.3-2.8-8.6h50.5v-2.5c0-4.8-.6-9.5-1.7-14.1-1.5-4.3-3.3-8.5-5.9-12.2Zm-43.3,16.8c0-2.3.7-4.6,2-6.8,1.3-2.3,3.3-4.1,5.8-5.6s5.7-2.2,9.4-2.2,6.5.7,8.8,2.2,4.1,3.4,5.3,5.6c1.2,2.3,1.8,4.5,1.8,6.8h-33.1Z"/><path class="cls-3" d="m551.08,67.2c-3.7,0-6.8.6-9.4,1.7-2.6,1.1-4.9,2.4-6.6,3.9-1.8,1.5-3.2,2.9-4.3,4.3-.2-4.8-4.2-8.5-9-8.5h-7.8v67.6h17v-36.6c0-5,1.7-9,5-12,3.4-3,7.4-4.5,12.1-4.5,2.9,0,5.5.4,7.8,1.3l3.5-16c-1.3-.5-2.7-.8-4-1-1.2-.1-2.6-.2-4.3-.2Z"/><path class="cls-3" d="m250.67,40.7c0,4.4.9,7.7,2.8,9.8,1.8,2.1,4.7,3.2,8.5,3.2,2.2,0,4.1-.3,5.7-1s3.2-1.7,4.7-3.2l-3.2-4.3c-.8.8-1.7,1.5-2.6,1.9s-2.1.6-3.4.6c-1.7,0-3-.6-3.9-1.7-.9-1.1-1.4-3.1-1.4-6.1v-18h10.8v-5.9h-10.8V4h-7.1v12h-6.6v5.9h6.6v18.8h-.1Z"/><path class="cls-3" d="m281.67,35.7c0-2.4.3-4.7,1-6.9s1.8-4,3.4-5.4,3.7-2.1,6.4-2.1,4.7.8,6.2,2.4,2.3,4.1,2.3,7.6v21.5h7.1v-22.1c0-4.7-1.2-8.5-3.5-11.4-2.3-2.8-5.9-4.2-10.7-4.2-2.3,0-4.2.3-5.8,1-1.6.7-2.9,1.5-4,2.5-1,1-1.9,1.9-2.5,2.8V0h-7v52.8h7.1v-17.1Z"/><path class="cls-3" d="m321.77,51.4c2.9,1.7,6.2,2.5,10,2.5,3.1,0,5.8-.4,7.9-1.2,2.2-.8,4-1.7,5.3-2.8,1.4-1,2.3-1.9,2.8-2.5l-4-4.3c-.8,1-2.3,2-4.3,3.1s-4.6,1.6-7.7,1.6c-2.1,0-4.1-.5-5.9-1.5s-3.3-2.3-4.4-4-1.7-3.7-1.7-5.8h29c0-3.7-.6-7.2-1.8-10.5-1.2-3.3-3.1-5.9-5.8-8-2.6-2.1-6.1-3.1-10.4-3.1-3.6,0-6.8.9-9.5,2.6-2.8,1.7-4.9,4-6.5,6.9s-2.3,6.1-2.3,9.7c0,3.9.8,7.3,2.4,10.3,1.8,3,4,5.3,6.9,7Zm-.4-25.2c.9-1.6,2.1-2.8,3.8-3.8,1.6-1,3.6-1.5,5.9-1.5,3.3,0,5.8,1,7.6,3,1.8,2,2.8,4.4,3,7.3h-21.8c.2-1.8.6-3.4,1.5-5Z"/><polygon class="cls-3" points="619.08 68 600.67 117.6 582.08 68 563.38 68 591.58 135.6 574.17 178 593.08 178 637.88 68 619.08 68"/></g></g></svg>
					</a>
				</li>
				<li>
					<a class="docs" href={`/${lang || 'en'}/getting-started/`}>
						<span class="sr-only">Toolkit</span>
						<svg style="height: 20px; margin-top: 6px" id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 370.48 61.56"><defs><style>.cls-1{fill:#00dfc3;}.cls-2{fill:#007b98;}</style></defs><g><path class="cls-2" d="m68.19,14.45h-15.28V4.01h42.35v10.44h-15.28v43.11h-11.8V14.45Z"/><path class="cls-2" d="m96.48,30.78c0-4.28.72-8.17,2.16-11.65,1.44-3.48,3.44-6.44,6.01-8.89,2.57-2.45,5.62-4.32,9.15-5.63,3.53-1.31,7.39-1.97,11.57-1.97s8.04.66,11.57,1.97c3.53,1.31,6.58,3.19,9.15,5.63,2.57,2.45,4.58,5.41,6.01,8.89,1.44,3.48,2.16,7.36,2.16,11.65s-.72,8.17-2.16,11.65c-1.44,3.48-3.44,6.44-6.01,8.89-2.57,2.45-5.62,4.32-9.15,5.63-3.53,1.31-7.39,1.97-11.57,1.97s-8.04-.66-11.57-1.97c-3.53-1.31-6.58-3.19-9.15-5.63-2.57-2.45-4.58-5.41-6.01-8.89-1.44-3.48-2.16-7.36-2.16-11.65Zm12.25,0c0,2.52.39,4.83,1.17,6.92.78,2.09,1.9,3.91,3.37,5.45,1.46,1.54,3.21,2.74,5.26,3.59,2.04.86,4.32,1.29,6.84,1.29s4.8-.43,6.84-1.29c2.04-.86,3.79-2.05,5.26-3.59,1.46-1.54,2.58-3.35,3.37-5.45.78-2.09,1.17-4.4,1.17-6.92s-.39-4.76-1.17-6.88c-.78-2.12-1.9-3.94-3.37-5.48-1.46-1.54-3.21-2.73-5.26-3.59-2.04-.86-4.32-1.29-6.84-1.29s-4.8.43-6.84,1.29c-2.04.86-3.79,2.06-5.26,3.59-1.46,1.54-2.58,3.37-3.37,5.48-.78,2.12-1.17,4.41-1.17,6.88Z"/><path class="cls-2" d="m157.21,30.78c0-4.28.72-8.17,2.16-11.65,1.44-3.48,3.44-6.44,6.01-8.89,2.57-2.45,5.62-4.32,9.15-5.63,3.53-1.31,7.39-1.97,11.57-1.97s8.04.66,11.57,1.97c3.53,1.31,6.58,3.19,9.15,5.63,2.57,2.45,4.58,5.41,6.01,8.89,1.44,3.48,2.16,7.36,2.16,11.65s-.72,8.17-2.16,11.65c-1.44,3.48-3.44,6.44-6.01,8.89-2.57,2.45-5.62,4.32-9.15,5.63-3.53,1.31-7.39,1.97-11.57,1.97s-8.04-.66-11.57-1.97c-3.53-1.31-6.58-3.19-9.15-5.63-2.57-2.45-4.58-5.41-6.01-8.89-1.44-3.48-2.16-7.36-2.16-11.65Zm12.25,0c0,2.52.39,4.83,1.17,6.92.78,2.09,1.9,3.91,3.37,5.45,1.46,1.54,3.21,2.74,5.26,3.59,2.04.86,4.32,1.29,6.84,1.29s4.8-.43,6.84-1.29c2.04-.86,3.79-2.05,5.26-3.59,1.46-1.54,2.58-3.35,3.37-5.45.78-2.09,1.17-4.4,1.17-6.92s-.39-4.76-1.17-6.88c-.78-2.12-1.9-3.94-3.37-5.48-1.46-1.54-3.21-2.73-5.26-3.59-2.04-.86-4.32-1.29-6.84-1.29s-4.8.43-6.84,1.29c-2.04.86-3.79,2.06-5.26,3.59-1.46,1.54-2.58,3.37-3.37,5.48-.78,2.12-1.17,4.41-1.17,6.88Z"/><path class="cls-2" d="m221.57,4.01h11.8v42.66h21.86v10.89h-33.66V4.01Z"/><path class="cls-2" d="m260.29,4.01h11.8v22.24l20.8-22.24h15.43l-23.82,24.88,25.87,28.66h-16.49l-21.78-25.41v25.41h-11.8V4.01Z"/><path class="cls-2" d="m312.4,4.01h11.8v53.55h-11.8V4.01Z"/><path class="cls-2" d="m343.41,14.45h-15.28V4.01h42.35v10.44h-15.28v43.11h-11.8V14.45Z"/></g><path class="cls-1" d="m22.61,0l8.62,2.65L8.55,61.56l-8.55-2.65L22.61,0Z"/></svg>					</a>
				</li>
			</ul>
		</div>
		<ThemeToggleButton
			client:visible
			labels={{ useLight: t('themeToggle.useLight'), useDark: t('themeToggle.useDark') }}
			isInsideHeader={true}
		/>
		{lang && <LanguageSelect lang={lang} client:idle />}
		<Search {lang} labels={docsearchStrings} />
		<SidebarToggle client:idle />
	</nav>
</header>

<style>
	header {
		position: fixed;
		left: 0;
		top: 0;
		right: 0;
		height: var(--theme-navbar-height);
		z-index: 11;
		padding: 2rem 0;
		background-color: var(--theme-navbar-bg);
		display: flex;
		align-items: center;
		justify-content: left;
		overflow: hidden;
	}

	ul,
	li {
		all: inherit;
		flex-grow: 0;
	}

	.nav-wrapper {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 0.75rem;
		width: 100%;
		padding-inline: var(--min-spacing-inline);
	}

	/* If the device is likely to show a scrollbar gutter, reserve space for it */
	@media (hover: hover) {
		.nav-wrapper {
			max-width: calc(100vw - 1.1rem);
		}
	}

	.logo {
		display: flex;
		justify-content: flex-start;
		font-size: 1rem;
		flex-grow: 1;
		flex-shrink: 0;
		font-weight: 600;
		line-height: 1;
		color: hsla(var(--color-base-white), 100%, 1);
		text-decoration: none;
		gap: 0.5em;
	}

	:global([dir='rtl']) .logo {
		justify-content: flex-end;
	}

	.logo a {
		padding: 0em 0.1em 0.5em;
		margin: -0.5em -0.25em;
	}

	.logo svg {
		height: 40px;
		width: auto;
		display: block;
		color: var(--theme-accent);
	}

	.logo .hover {
		opacity: 0;
	}
	.logo a {
		transition: transform 180ms ease-out;
	}

	.logo a:hover,
	.logo a:focus {
		opacity: 1;
		transform: translateY(-2px);
	}

	.logo a:focus:not(:focus-visible) {
		outline: none;
	}

	.logo h1 {
		font: inherit;
		color: inherit;
		margin: 0;
	}

	.astro {
		overflow: hidden;
		width: 41px;
	}

	.docs {
		display: none;
	}

	@media (min-width: 20em) {
		.docs {
			display: inherit;
			max-width: 80px;
		}
	}

	@media (min-width: 23.5em) {
		.docs {
			max-width: none;
		}
		.nav-wrapper {
			gap: 1rem;
		}
	}

	@media (min-width: 50em) {
		header {
			padding: 2.5rem 0 1.5rem 0;
		}
		.astro {
			width: auto;
		}
	}

	@media (forced-colors: active) {
		.text {
			fill: LinkText;
		}
		.docs-path {
			fill: ActiveText;
		}
	}
</style>
